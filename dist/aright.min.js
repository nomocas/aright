!function(n){"use strict";function t(n,t,e,i,s,o){s&&i&&(s+="."),s=i?s+i:s,s||(s="."),n.valid=!1,n.map[s]=n.map[s]||{value:i?e[i]:e,errors:[]};var l=u(t);return l||(l="missing error message for "+t),o&&(l=l.replace(r,o)),n.map[s].errors.push(l),!1}function e(n){return function(){return this.exec("this",function(e,i){return typeof e!==n?t(this,n,e,null,i,n):!0})}}function i(n){return function(e,i){return this.exec(e,function(r,u){return"undefined"==typeof r[e]?i&&i.required===!1?!0:t(this,"missing",r,e,u):typeof r[e]!==n?t(this,n,r,e,u,n):i?i.call(this,r[e],u?u+"."+e:e):!0})}}var r=/%s/g,u=function(n,t){var e=u.data[t||u.currentLanguage];return e[n]};u.currentLanguage="en",u.data={en:{string:"should be a string",object:"should be an object",array:"should be an array","boolean":"should be a boolean",number:"should be a number","null":"should be null","enum":"enum failed (should be one of : %s)",equal:"equality failed (should be : %s)",format:"format failed",unmanaged:"unmanaged property",missing:"missing property",minLength:"too short (length should be at least : %s)",maxLength:"too long (length should be at max : %s)",minimum:"too small (should be at minimum : %s)",maximum:"too big (should be at max : %s)"}};var s={email:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/gi,phone:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/gi},o=function(){this._rules={}};o.prototype={validate:function(n){var t={valid:!0,map:{}};return this.call(t,n,""),t.valid?!0:(t.value=n,t)},call:function(n,e,i){var r=!0;if(this.required!==!1&&"undefined"==typeof e)return t(n,"missing",e,null,i);if(this._rules["this"]&&this._rules["this"].forEach(function(t){r=r&&t.call(n,e,i)}),!r)return!1;if("object"!=typeof e||e.forEach)return r;var u,s={};for(u in e)s[u]=!0;for(u in this._rules){if("this"===u)continue;var o=this._rules[u].call(n,e,i);s[u]=!1,r=r&&o}for(u in s)s[u]&&(r=t(n,"unmanaged",e,u,i));return r},exec:function(n,t){return"string"==typeof t&&(t=a[t]),"this"===n?(this._rules[n]=this._rules[n]||[]).push(t):this._rules[n]=t,this},rule:function(n,t){return t||(t=n,n=null),"string"==typeof t&&(t=a[t]),this.exec(n||"this",function(e,i){return e=n?e[n]:e,n&&(i=i?i+"."+n:n),t.call(this,e,i)})},required:function(n){return this.required=n,this},minLength:function(n){return this.exec("this",function(e,i){return e.length<n?t(this,"minLength",e,null,i,n):!0})},maxLength:function(n){return this.exec("this",function(e,i){return e.length>n?t(this,"maxLength",e,null,i,n):!0})},minimum:function(n){return this.exec("this",function(e,i){return n>e?t(this,"minimum",e,null,i,n):!0})},maximum:function(n){return this.exec("this",function(e,i){return e>n?t(this,"maximum",e,null,i,n):!0})},format:function(n){return"string"==typeof n&&(n=s[n]),this.exec("this",function(e,i){return n.test(e)?!0:t(this,"format",e,null,i)})},enumerable:function(n){return this.exec("this",function(e,i){return-1===n.indexOf(e)?t(this,"enum",e,null,i,n.join(", ")):!0})},item:function(n){return this.exec("this",function(t,e){var i=this,r=0,u=!0;return t.forEach(function(t){u=u&&n.call(i,t,e+"."+r++)}),u})},equal:function(n){return this.exec("this",function(e,i){return e!==n?t(this,"equal",e,name,i,n):void 0})},isObject:e("object"),object:i("object"),isString:e("string"),string:i("string"),func:i("function"),bool:i("boolean"),number:i("number"),isArray:function(){return this.exec("this",function(n,e){return"object"==typeof n||n.forEach?!0:t(this,"array",n,null,e)})},isNull:function(){return this.exec("this",function(n,e){return null!==n?t(this,"null",n,null,e):!0})},"null":function(n){return this.exec(n,function(e,i){return null!==e[n]?t(this,"null",e,n,i):!0})},array:function(n,e){return this.exec(n,function(i,r){return"undefined"==typeof i[n]?e&&e.required===!1?!0:t(this,"missing",i,n,r):"object"==typeof i[n]||i[n].forEach?e?e.call(this,i[n],r?r+"."+n:n):!0:t(this,"array",i,n,r)})}};var l=function(){return new o},a={email:l().isString().format("email").minLength(6)},h={v:l,Validator:o,rules:a,i18n:u,formats:s};"undefined"!=typeof module&&module.exports?module.exports=h:n.aright=h}(this);