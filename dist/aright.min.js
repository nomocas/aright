!function(n){"use strict";function t(n,t,e,u,s,o){s&&u&&(s+="."),s=u?s+u:s,s||(s="root"),n.valid=!1,n.map[s]=n.map[s]||{value:e&&u?e[u]:e,errors:[]};var l=r(t);return l||(l="missing error message for "+t),o&&(l=l.replace(i,o)),n.map[s].errors.push(l),!1}function e(n){return function(){return this.enqueue("this",function(e,u){return typeof e!==n?t(this,n,e,null,u,n):!0})}}function u(n){return function(e,u){return this.enqueue(e,function(i,r){return i?"undefined"==typeof i[e]?u&&u.required===!1?!0:t(this,"missing",i,e,r):typeof i[e]!==n?t(this,n,i,e,r,n):u?u.call(this,i[e],r?r+"."+e:e):!0:t(this,"missing",i,e,r)})}}var i=/%s/g,r=function(n,t){var e=r.data[t||r.currentLanguage];return e[n]};r.currentLanguage="en",r.data={en:{string:"should be a string",object:"should be an object",array:"should be an array","boolean":"should be a boolean",number:"should be a number","null":"should be null","enum":"enum failed (should be one of : %s)",equal:"equality failed (should be : %s)",format:"format failed",unmanaged:"unmanaged property",missing:"missing property",minLength:"too short (length should be at least : %s)",maxLength:"too long (length should be at max : %s)",minimum:"too small (should be at minimum : %s)",maximum:"too big (should be at max : %s)",instanceOf:"should be %s",or:'"or" rule not satisfied',not:'"not" rule not satisfied'}};var s={email:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i},o={},l=function(){this._rules={}};l.prototype={validate:function(n){var t={valid:!0,map:{}};return this.call(t,n,""),t.valid?!0:(t.value=n,t)},call:function(n,e,u){var i=!0;if(this.required!==!1&&"undefined"==typeof e)return t(n,"missing",e,null,u);if(this._rules["this"]&&this._rules["this"].forEach(function(t){i=i&&t.call(n,e,u)}),!i)return!1;if("object"!=typeof e||e&&e.forEach)return i;var r,s={};for(r in e)s[r]=!0;for(r in this._rules){if("this"===r)continue;var o=this._rules[r].call(n,e,u);s[r]=!1,i=i&&o}for(r in s)s[r]&&(i=t(n,"unmanaged",e,r,u));return i},enqueue:function(n,t){return"string"==typeof t&&(t=o[t]),"this"===n?(this._rules[n]=this._rules[n]||[]).push(t):this._rules[n]=t,this},rule:function(n,t){return t||(t=n,n=null),"string"==typeof t&&(t=o[t]),this.enqueue(n||"this",function(e,u){return e=n?e[n]:e,n&&(u=u?u+"."+n:n),t.call(this,e,u)})},or:function(){var n=[].slice.call(arguments);return this.enqueue("this",function(e,u){var i={map:{}},r=n.some(function(n){return n.call(i,e,u)});return r?!0:t(this,"or",e,null,u)})},not:function(n){return this.enqueue("this",function(e,u){var i={map:{}};return n.call(i,e,u)?t(this,"not",e,null,u):!0})},required:function(n){return this.required=n,this},minLength:function(n){return this.enqueue("this",function(e,u){return e.length<n?t(this,"minLength",e,null,u,n):!0})},maxLength:function(n){return this.enqueue("this",function(e,u){return e.length>n?t(this,"maxLength",e,null,u,n):!0})},minimum:function(n){return this.enqueue("this",function(e,u){return n>e?t(this,"minimum",e,null,u,n):!0})},maximum:function(n){return this.enqueue("this",function(e,u){return e>n?t(this,"maximum",e,null,u,n):!0})},between:function(n,t){return this.minimum(n).maximum(t)},format:function(n){return"string"==typeof n&&(n=s[n]),this.enqueue("this",function(e,u){return n.test(e)?!0:t(this,"format",e,null,u)})},enumerable:function(n){return this.enqueue("this",function(e,u){return-1===n.indexOf(e)?t(this,"enum",e,null,u,n.join(", ")):!0})},item:function(n){return this.enqueue("this",function(t,e){var u=this,i=0;return t.every(function(t){return n.call(u,t,e+"."+i++)})})},equal:function(n){return this.enqueue("this",function(e,u){return e!==n?t(this,"equal",e,null,u,n):!0})},instanceOf:function(n){return this.enqueue("this",function(e,u){return e instanceof n?!0:t(this,"instanceOf",e,null,u,n)})},type:function(){for(var n=[],t=0,e=arguments.length;e>t;++t)n.push(a()["is"+arguments[t][0].toUpperCase()+arguments[t].substring(1)]());return this.or.apply(this,n)},isObject:e("object"),isString:e("string"),isNumber:e("number"),isBool:e("boolean"),isFunction:e("function"),isArray:function(){return this.enqueue("this",function(n,e){return"object"==typeof n&&n.forEach?!0:t(this,"array",n,null,e)})},isNull:function(){return this.enqueue("this",function(n,e){return null!==n?t(this,"null",n,null,e):!0})},object:u("object"),string:u("string"),func:u("function"),bool:u("boolean"),number:u("number"),"null":function(n){return this.enqueue(n,function(e,u){return null!==e[n]?t(this,"null",e,n,u):!0})},array:function(n,e){return this.enqueue(n,function(u,i){return"undefined"==typeof u[n]?e&&e.required===!1?!0:t(this,"missing",u,n,i):"object"==typeof u[n]&&u[n].forEach?e?e.call(this,u[n],i?i+"."+n:n):!0:t(this,"array",u,n,i)})}};var a=function(){return new l};o.email=a().isString().format("email").minLength(6);var h={v:a,Validator:l,rules:o,i18n:r,formats:s,error:t};"undefined"!=typeof module&&module.exports?module.exports=h:n.aright=h}(this);